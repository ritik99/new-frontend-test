{"ast":null,"code":"import request from 'request';\nimport { getSymbol } from './../../utility/symbol';\nimport { SUBGRAPH_API_URL } from '../../utility/constants';\nexport function collateralborrowPools(address, setpooldata) {\n  let result;\n  const data = JSON.stringify({\n    query: `  {\n            pools(where:{id:\"${address}\"}) {\n              id\n              idealCollateralRatio\n              borrowAmountRequested\n              collateralAsset\n              borrowAsset\n            }\n          }\n        \n          `\n  });\n  var options = {\n    'method': 'POST',\n    'url': SUBGRAPH_API_URL,\n    'headers': {\n      'Content-Type': 'application/json'\n    },\n    'body': data\n  };\n  result = request(options, async function (error, response) {\n    if (error) throw new Error(error);\n    var body = JSON.parse(response.body);\n    var pools = [];\n\n    if (body) {\n      if (body.data) {\n        if (body.data.pools && body.data.pools.length > 0) {\n          if (body.data.pools[0]) {\n            let poolData = body.data.pools[0];\n            var pool = {\n              collateralRatio: poolData.idealCollateralRatio / 10 ** 8 + '%',\n              borrowed_amount: poolData.borrowAmountRequested / 10 ** 18 + ' ' + getSymbol(poolData.borrowAsset),\n              collateralAssest: getSymbol(poolData.collateralAsset)\n            };\n            setpooldata(pool);\n          }\n        }\n      }\n    }\n  });\n}\n;","map":{"version":3,"sources":["/Users/ritikdutta/Desktop/sublime-frontend/src/query/pool/addCollateral.js"],"names":["request","getSymbol","SUBGRAPH_API_URL","collateralborrowPools","address","setpooldata","result","data","JSON","stringify","query","options","error","response","Error","body","parse","pools","length","poolData","pool","collateralRatio","idealCollateralRatio","borrowed_amount","borrowAmountRequested","borrowAsset","collateralAssest","collateralAsset"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,SAAQC,SAAR,QAAwB,wBAAxB;AACA,SAAQC,gBAAR,QAA+B,yBAA/B;AAGA,OAAO,SAASC,qBAAT,CAA+BC,OAA/B,EAAuCC,WAAvC,EAAmD;AAEtD,MAAIC,MAAJ;AAEA,QAAMC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AACxBC,IAAAA,KAAK,EAAG;AAChB,+BAA+BN,OAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXgC,GAAf,CAAb;AAeA,MAAIO,OAAO,GAAG;AACV,cAAU,MADA;AAEV,WAAOT,gBAFG;AAGV,eAAW;AAAC,sBAAgB;AAAjB,KAHD;AAIV,YAAQK;AAJE,GAAd;AAQAD,EAAAA,MAAM,GAAGN,OAAO,CAACW,OAAD,EAAU,gBAAgBC,KAAhB,EAAuBC,QAAvB,EAAiC;AAEvD,QAAID,KAAJ,EAAW,MAAM,IAAIE,KAAJ,CAAUF,KAAV,CAAN;AACX,QAAIG,IAAI,GAAGP,IAAI,CAACQ,KAAL,CAAWH,QAAQ,CAACE,IAApB,CAAX;AACA,QAAIE,KAAK,GAAG,EAAZ;;AACA,QAAGF,IAAH,EAAQ;AACJ,UAAGA,IAAI,CAACR,IAAR,EAAa;AACT,YAAGQ,IAAI,CAACR,IAAL,CAAUU,KAAV,IAAmBF,IAAI,CAACR,IAAL,CAAUU,KAAV,CAAgBC,MAAhB,GAAuB,CAA7C,EAA+C;AAC3C,cAAGH,IAAI,CAACR,IAAL,CAAUU,KAAV,CAAgB,CAAhB,CAAH,EAAsB;AAClB,gBAAIE,QAAQ,GAAGJ,IAAI,CAACR,IAAL,CAAUU,KAAV,CAAgB,CAAhB,CAAf;AACA,gBAAIG,IAAI,GAAG;AACCC,cAAAA,eAAe,EAAGF,QAAQ,CAACG,oBAAV,GAAgC,MAAI,CAApC,GAAsC,GADxD;AAECC,cAAAA,eAAe,EAAGJ,QAAQ,CAACK,qBAAV,GAAiC,MAAI,EAArC,GAAyC,GAAzC,GAA6CvB,SAAS,CAACkB,QAAQ,CAACM,WAAV,CAFxE;AAGCC,cAAAA,gBAAgB,EAAEzB,SAAS,CAACkB,QAAQ,CAACQ,eAAV;AAH5B,aAAX;AAKAtB,YAAAA,WAAW,CAACe,IAAD,CAAX;AACH;AACJ;AACJ;AAEJ;AAEJ,GAtBe,CAAhB;AAwBH;AAAA","sourcesContent":["import request from 'request'\nimport {getSymbol} from './../../utility/symbol'\nimport {SUBGRAPH_API_URL} from '../../utility/constants'\n\n\nexport function collateralborrowPools(address,setpooldata){\n\n    let result;\n    \n    const data = JSON.stringify({\n        query: `  {\n            pools(where:{id:\"${address}\"}) {\n              id\n              idealCollateralRatio\n              borrowAmountRequested\n              collateralAsset\n              borrowAsset\n            }\n          }\n        \n          `\n    })\n    \n    \n    var options = {\n        'method': 'POST',\n        'url': SUBGRAPH_API_URL,\n        'headers': {'Content-Type': 'application/json'},\n        'body': data\n    }       \n\n\n    result = request(options, async function (error, response) {\n\n        if (error) throw new Error(error); \n        var body = JSON.parse(response.body)\n        var pools = []\n        if(body){\n            if(body.data){\n                if(body.data.pools && body.data.pools.length>0){\n                    if(body.data.pools[0]){\n                        let poolData = body.data.pools[0]\n                        var pool = {\n                                    collateralRatio: (poolData.idealCollateralRatio)/10**8+'%',\n                                    borrowed_amount: (poolData.borrowAmountRequested)/10**18+ ' '+getSymbol(poolData.borrowAsset),\n                                    collateralAssest: getSymbol(poolData.collateralAsset)\n                                    }\n                        setpooldata(pool)\n                    }\n                }\n            }\n            \n        }\n        \n    })\n    \n};"]},"metadata":{},"sourceType":"module"}